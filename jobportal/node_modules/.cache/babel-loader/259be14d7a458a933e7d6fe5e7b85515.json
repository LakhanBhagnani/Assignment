{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\GitHub\\\\Assignment\\\\jobportal\\\\src\\\\pages\\\\Login.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { Component, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport axios from \"axios\";\nimport NavBar from \"../component/NavBar\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst Login = () => {\n  _s();\n\n  const [Username, setUsername] = useState();\n  const [password, setPassword] = useState();\n  const [usertype, setuserType] = useState();\n  const [isLoggedIn, setLogg] = useState(localStorage.getItem(\"token\") == null ? false : true);\n\n  const submitHandle = async e => {\n    e.preventDefault();\n    let apiurl = \"\";\n\n    if (usertype == \"Company\") {\n      apiurl = \"getCompanyDetails/\" + Username;\n    } else {\n      apiurl = \"getCandidateDetails/\" + Username;\n    }\n\n    let url = \"http://localhost:3001/api/\" + apiurl;\n    let headers = {\n      headers: {\n        \"access-control-allow-origin\": \"http://localhost:3001/\",\n        withCredentials: true\n      }\n    };\n    axios.get(url, headers).then(response => {\n      let ele = document.getElementById(\"errorSpan\");\n      console.log(\"response is generated\");\n      let result = response.data.recordset[0];\n\n      if (result !== undefined) {\n        const comparision = password.toLowerCase().trim() === result.UserPassword.toLowerCase().trim();\n\n        if (comparision) {\n          let token = result.Username;\n          localStorage.setItem(\"token\", token);\n          localStorage.setItem(\"type\", usertype);\n          localStorage.setItem(\"UserDetails\", JSON.stringify(result));\n          setLogg(true);\n        } else {\n          ele.innerHTML = \"username and password doesn't match\";\n          ele.classList.add(\"myspans\");\n        }\n      } else {\n        ele.innerHTML = \"No Username found\";\n        ele.classList.add(\"myspans\");\n      }\n    });\n  };\n\n  if (isLoggedIn) {\n    if (usertype == \"Candidate\") return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/CandidateHome\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 39\n    }, this);else return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/CompanyHome\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 15\n    }, this);\n  }\n\n  const onChangeValue = event => {\n    setuserType(event.target.value);\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 64,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"form-signin\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: submitHandle,\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          id: \"errorSpan\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 67,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n          className: \"h3 mb-3 fw-normal\",\n          children: \"Please Login in\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 68,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            className: \"form-control\",\n            id: \"floatingInput\",\n            placeholder: \"Username\",\n            onChange: e => setUsername(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 71,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"form-floating\",\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"password\",\n            className: \"form-control\",\n            id: \"floatingPassword\",\n            placeholder: \"Password\",\n            onChange: e => setPassword(e.target.value),\n            required: true\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 81,\n            columnNumber: 7\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          onChange: onChangeValue,\n          required: true,\n          children: [/*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-check-input\",\n            type: \"radio\",\n            value: \"Company\",\n            name: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 92,\n            columnNumber: 7\n          }, this), \"Company\", /*#__PURE__*/_jsxDEV(\"div\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 99,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            className: \"form-check-input\",\n            type: \"radio\",\n            value: \"Candidate\",\n            name: \"User\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 100,\n            columnNumber: 7\n          }, this), \"Candidate\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          className: \"mt-2 w-100 btn btn-lg btn-primary\",\n          type: \"submit\",\n          children: \"Login\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 109,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"mt-5 mb-3 text-muted\",\n          children: \"\\xA9 2021\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true);\n};\n\n_s(Login, \"jnYXVVF9KEU8sNz9ik5cbgVBI98=\");\n\n_c = Login;\nexport default Login;\n\nvar _c;\n\n$RefreshReg$(_c, \"Login\");","map":{"version":3,"sources":["C:/Users/Admin/Documents/GitHub/Assignment/jobportal/src/pages/Login.jsx"],"names":["React","Component","useState","Redirect","axios","NavBar","Login","Username","setUsername","password","setPassword","usertype","setuserType","isLoggedIn","setLogg","localStorage","getItem","submitHandle","e","preventDefault","apiurl","url","headers","withCredentials","get","then","response","ele","document","getElementById","console","log","result","data","recordset","undefined","comparision","toLowerCase","trim","UserPassword","token","setItem","JSON","stringify","innerHTML","classList","add","onChangeValue","event","target","value"],"mappings":"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","sourcesContent":["import React, { Component, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nimport NavBar from \"../component/NavBar\";\r\nconst Login = () => {\r\n\tconst [Username, setUsername] = useState();\r\n\tconst [password, setPassword] = useState();\r\n\tconst [usertype, setuserType] = useState();\r\n\tconst [isLoggedIn, setLogg] = useState(\r\n\t\tlocalStorage.getItem(\"token\") == null ? false : true\r\n\t);\r\n\r\n\tconst submitHandle = async (e) => {\r\n\t\te.preventDefault();\r\n\t\tlet apiurl = \"\";\r\n\t\tif (usertype == \"Company\") {\r\n\t\t\tapiurl = \"getCompanyDetails/\" + Username;\r\n\t\t} else {\r\n\t\t\tapiurl = \"getCandidateDetails/\" + Username;\r\n\t\t}\r\n\t\tlet url = \"http://localhost:3001/api/\" + apiurl;\r\n\t\tlet headers = {\r\n\t\t\theaders: {\r\n\t\t\t\t\"access-control-allow-origin\": \"http://localhost:3001/\",\r\n\t\t\t\twithCredentials: true,\r\n\t\t\t},\r\n\t\t};\r\n\t\taxios.get(url, headers).then((response) => {\r\n\t\t\tlet ele=document.getElementById(\"errorSpan\");\r\n\t\t\tconsole.log(\"response is generated\");\r\n\t\t\tlet result = response.data.recordset[0];\r\n\t\t\tif (result !== undefined) {\r\n\t\t\t\tconst comparision =\r\n\t\t\t\t\tpassword.toLowerCase().trim() ===\r\n\t\t\t\t\tresult.UserPassword.toLowerCase().trim();\r\n\t\t\t\tif (comparision) {\r\n\t\t\t\t\tlet token = result.Username;\r\n\t\t\t\t\tlocalStorage.setItem(\"token\", token);\r\n\t\t\t\t\tlocalStorage.setItem(\"type\", usertype);\r\n\t\t\t\t\tlocalStorage.setItem(\"UserDetails\", JSON.stringify(result));\r\n\t\t\t\t\tsetLogg(true);\r\n\t\t\t\t} else {\r\n\t\t\t\t\tele.innerHTML=\"username and password doesn't match\";\r\n\t\t\t\t\tele.classList.add(\"myspans\");\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\tele.innerHTML=\"No Username found\";\r\n\t\t\t\tele.classList.add(\"myspans\");\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\r\n\tif (isLoggedIn) {\r\n\t\tif (usertype == \"Candidate\") return <Redirect to='/CandidateHome' />;\r\n\t\telse return <Redirect to='/CompanyHome' />;\r\n\t}\r\n\r\n\tconst onChangeValue = (event) => {\r\n\t\tsetuserType(event.target.value);\r\n\t};\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<NavBar />\r\n\t\t\t<main className='form-signin'>\r\n\t\t\t\t<form onSubmit={submitHandle}>\r\n\t\t\t\t<span  id=\"errorSpan\"></span>\r\n\t\t\t\t\t<h1 className='h3 mb-3 fw-normal'>Please Login in</h1>\r\n\r\n\t\t\t\t\t<div className='form-floating'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='text'\r\n\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\tid='floatingInput'\r\n\t\t\t\t\t\t\tplaceholder=\"Username\"\r\n\t\t\t\t\t\t\tonChange={(e) => setUsername(e.target.value)}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div className='form-floating'>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\ttype='password'\r\n\t\t\t\t\t\t\tclassName='form-control'\r\n\t\t\t\t\t\t\tid='floatingPassword'\r\n\t\t\t\t\t\t\tplaceholder=\"Password\"\r\n\t\t\t\t\t\t\tonChange={(e) => setPassword(e.target.value)}\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t<div onChange={onChangeValue} required>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName='form-check-input'\r\n\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\tvalue='Company'\r\n\t\t\t\t\t\t\tname='User'\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tCompany\r\n\t\t\t\t\t\t<div></div>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tclassName='form-check-input'\r\n\t\t\t\t\t\t\ttype='radio'\r\n\t\t\t\t\t\t\tvalue='Candidate'\r\n\t\t\t\t\t\t\tname='User'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\tCandidate\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<button className='mt-2 w-100 btn btn-lg btn-primary' type='submit'>\r\n\t\t\t\t\t\tLogin\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<p className='mt-5 mb-3 text-muted'>&copy; 2021</p>\r\n\t\t\t\t</form>\r\n\t\t\t</main>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default Login;\r\n"]},"metadata":{},"sourceType":"module"}