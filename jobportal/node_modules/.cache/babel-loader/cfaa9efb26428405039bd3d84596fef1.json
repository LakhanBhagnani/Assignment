{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Admin\\\\Documents\\\\GitHub\\\\Assignment\\\\jobportal\\\\src\\\\pages\\\\CandidateHome.jsx\",\n    _s = $RefreshSig$();\n\nimport axios from \"axios\";\nimport React, { Component, useEffect, useState } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport NavBar from \"../component/NavBar\";\nimport ReactPaginate from \"react-paginate\";\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\nimport Dropdown from \"react-bootstrap/Dropdown\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst CandidateHome = () => {\n  _s();\n\n  const [jobs, setJobs] = useState({});\n  const [hasApplied, setApplied] = useState(false);\n  const [userdetails, setUserdetails] = useState(JSON.parse(localStorage.getItem(\"UserDetails\")));\n  const [isLoggedin, setLogg] = useState(localStorage.getItem(\"token\") == null ? false : true);\n  const [pageNumber, setPagenumber] = useState(0);\n  const Jobsperpage = 2;\n  const pageVisited = pageNumber * Jobsperpage;\n  const pageCount = Math.ceil(jobs.length / Jobsperpage);\n\n  const changePage = ({\n    selected\n  }) => {\n    setPagenumber(selected);\n  };\n\n  const ApplyNow = value => {\n    let userId = userdetails.CANDIDATE_ID;\n    let appliedDate = new Date();\n    let obj = {\n      value,\n      userId,\n      appliedDate\n    };\n    axios.post(\"http://localhost:3001/api/applyNow/\", obj).then(response => {\n      if (response) {\n        console.log(response);\n        setApplied(true);\n      }\n    });\n  };\n\n  const isApplied = j_id => {\n    let userId = userdetails.CANDIDATE_ID;\n    let obj = {\n      userId,\n      j_id\n    };\n    axios.post(\"http://localhost:3001/api/isApplied/\", obj).then(response => {\n      if (response) {\n        if (response.data.returnValue) return;\n      }\n    });\n  };\n\n  const displayJobs = Object.entries(jobs).slice(pageVisited, pageVisited + Jobsperpage).map(job => {\n    return /*#__PURE__*/_jsxDEV(\"li\", {\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"container mt-2 bg-light border-dark\",\n        id: job[1].JOB_ID,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex \",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-1\",\n            children: job[1].JobRole\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-1 mr-auto\",\n            children: [\"(\", job[1].JobType, \")\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 67,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-1\",\n            children: [job[1].CompanyName, \",\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 68,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-1\",\n            children: job[1].JobLocation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 69,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex p-2\",\n          children: [\"Job Description: \", /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 72,\n            columnNumber: 32\n          }, this), job[1].JobDescription]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 71,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"d-flex p-1\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-3 p-1\",\n              children: \"Experience\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 77,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-2 p-1\",\n              children: [job[1].RequiredExperience, \"+\", parseInt(job[1].RequiredExperience) > 1 ? \" Years\" : \" Year\"]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 76,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-row mr-auto\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-2 p-1\",\n              children: \"Qualification\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 84,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-3 p-1\",\n              children: job[1].RequiredQualification\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 85,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 83,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex-row\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-2 p-2\",\n              children: \"Job Posted on\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"order-3 p-1\",\n              children: [new Date(job[1].PostingDate).getDate(), \"/\", new Date(job[1].PostingDate).getMonth() + 1, \"/\", new Date(job[1].PostingDate).getFullYear()]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this), isApplied(job[1].JOB_ID) ? /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"order-4 btn btn-success btn-sm float-right\",\n            children: [\"Applied\", \" \"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 98,\n            columnNumber: 17\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            class: \"order-4 btn btn-info btn-sm float-right\",\n            \"data-dismiss\": \"alert\",\n            onClick: () => ApplyNow(job[1].JOB_ID),\n            children: \"Apply Now\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 13\n        }, this)]\n      }, job[1].JOB_ID, true, {\n        fileName: _jsxFileName,\n        lineNumber: 60,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this);\n  });\n\n  const loadData = () => {\n    fetch(\"http://localhost:3001/api/Alljobs\").then(response => response.json()).then(data => {\n      setJobs(data.recordset);\n    });\n  };\n\n  useEffect(() => {\n    loadData();\n  }, []);\n\n  if (hasApplied) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/jobsApplied\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 12\n    }, this);\n  }\n\n  if (isLoggedin) {\n    if (localStorage.getItem(\"type\") == \"Company\") return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/CompanyHome\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 135,\n      columnNumber: 14\n    }, this);\n  } else if (!isLoggedin) {\n    return /*#__PURE__*/_jsxDEV(Redirect, {\n      to: \"/Login\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 12\n    }, this);\n  }\n\n  const distinctQualifications = Object.entries(jobs).map(function (x) {\n    return x[1].RequiredQualification;\n  }).filter(function test(val, ind, self) {\n    return self.indexOf(val) === ind;\n  });\n  const QualificationRender = distinctQualifications.map(Qualification => {\n    return /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n      onClick: () => QualificationFilter(Qualification),\n      children: Qualification\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this);\n  });\n\n  const QualificationFilter = RequiredQualification => {\n    let filtered = jobs.filter(e => {\n      return e.RequiredQualification == RequiredQualification;\n    });\n    setJobs(filtered);\n  };\n\n  const distinctLocations = Object.entries(jobs).map(function (x) {\n    return x[1].JobLocation;\n  }).filter(function test(val, ind, self) {\n    return self.indexOf(val) === ind;\n  });\n  const LocationRender = distinctLocations.map(JobLocation => {\n    return /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n      onClick: () => JobLocationFilter(JobLocation),\n      children: JobLocation\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 169,\n      columnNumber: 7\n    }, this);\n  });\n\n  const JobLocationFilter = JobLocation => {\n    let filtered = jobs.filter(e => {\n      return e.JobLocation == JobLocation;\n    });\n    setJobs(filtered);\n  };\n\n  const DistinctJobType = Object.entries(jobs).map(function (x) {\n    return x[1].JobType;\n  }).filter(function test(val, ind, self) {\n    return self.indexOf(val) === ind;\n  });\n  const JobTypeRender = DistinctJobType.map(JobType => {\n    return /*#__PURE__*/_jsxDEV(Dropdown.Item, {\n      onClick: () => JobTypeFilter(JobType),\n      children: JobType\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }, this);\n  });\n\n  const JobTypeFilter = JobType => {\n    let filtered = jobs.filter(e => {\n      return e.JobType == JobType;\n    });\n    setJobs(filtered);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(NavBar, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"filters d-flex\",\n      children: [/*#__PURE__*/_jsxDEV(DropdownButton, {\n        id: \"dropdown-basic-button\",\n        title: \"Qualification\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => loadData(),\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 207,\n          columnNumber: 11\n        }, this), QualificationRender]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 206,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n        id: \"dropdown-basic-button\",\n        title: \"Location\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => loadData(),\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this), LocationRender]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(DropdownButton, {\n        id: \"dropdown-basic-button\",\n        title: \"Job Type\",\n        children: [/*#__PURE__*/_jsxDEV(Dropdown.Item, {\n          onClick: () => loadData(),\n          children: \"All\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 215,\n          columnNumber: 11\n        }, this), JobTypeRender]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 214,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 205,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      type: \"none\",\n      children: displayJobs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 220,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ReactPaginate, {\n      previousLabel: \"Previous\",\n      nextLabel: \"Next\",\n      pageCount: pageCount,\n      onPageChange: changePage,\n      containerClassName: \"paginationBttns\",\n      previousLinkClassName: \"previousBttn\",\n      nextLinkClassName: \"nextBttn\",\n      disabledClassName: \"paginationDisabled\",\n      activeClassName: \"paginationActive\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 203,\n    columnNumber: 5\n  }, this);\n};\n\n_s(CandidateHome, \"iPHmY0DXZ0TAey29Vl8kc+lLel4=\");\n\n_c = CandidateHome;\nexport default CandidateHome;\n\nvar _c;\n\n$RefreshReg$(_c, \"CandidateHome\");","map":{"version":3,"sources":["C:/Users/Admin/Documents/GitHub/Assignment/jobportal/src/pages/CandidateHome.jsx"],"names":["axios","React","Component","useEffect","useState","Redirect","NavBar","ReactPaginate","DropdownButton","Dropdown","CandidateHome","jobs","setJobs","hasApplied","setApplied","userdetails","setUserdetails","JSON","parse","localStorage","getItem","isLoggedin","setLogg","pageNumber","setPagenumber","Jobsperpage","pageVisited","pageCount","Math","ceil","length","changePage","selected","ApplyNow","value","userId","CANDIDATE_ID","appliedDate","Date","obj","post","then","response","console","log","isApplied","j_id","data","returnValue","displayJobs","Object","entries","slice","map","job","JOB_ID","JobRole","JobType","CompanyName","JobLocation","JobDescription","RequiredExperience","parseInt","RequiredQualification","PostingDate","getDate","getMonth","getFullYear","loadData","fetch","json","recordset","distinctQualifications","x","filter","test","val","ind","self","indexOf","QualificationRender","Qualification","QualificationFilter","filtered","e","distinctLocations","LocationRender","JobLocationFilter","DistinctJobType","JobTypeRender","JobTypeFilter"],"mappings":"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","sourcesContent":["import axios from \"axios\";\r\nimport React, { Component, useEffect, useState } from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport NavBar from \"../component/NavBar\";\r\nimport ReactPaginate from \"react-paginate\";\r\nimport DropdownButton from \"react-bootstrap/DropdownButton\";\r\nimport Dropdown from \"react-bootstrap/Dropdown\";\r\nconst CandidateHome = () => {\r\n  const [jobs, setJobs] = useState({});\r\n  const [hasApplied, setApplied] = useState(false);\r\n  const [userdetails, setUserdetails] = useState(\r\n    JSON.parse(localStorage.getItem(\"UserDetails\"))\r\n  );\r\n  const [isLoggedin, setLogg] = useState(\r\n    localStorage.getItem(\"token\") == null ? false : true\r\n  );\r\n  const [pageNumber, setPagenumber] = useState(0);\r\n  const Jobsperpage = 2;\r\n  const pageVisited = pageNumber * Jobsperpage;\r\n  const pageCount = Math.ceil(jobs.length / Jobsperpage);\r\n\r\n  const changePage = ({ selected }) => {\r\n    setPagenumber(selected);\r\n  };\r\n  const ApplyNow = (value) => {\r\n    let userId = userdetails.CANDIDATE_ID;\r\n    let appliedDate = new Date();\r\n    let obj = {\r\n      value,\r\n      userId,\r\n      appliedDate,\r\n    };\r\n    axios.post(\"http://localhost:3001/api/applyNow/\", obj).then((response) => {\r\n      if (response) {\r\n        console.log(response);\r\n        setApplied(true);\r\n      }\r\n    });\r\n  };\r\n\r\n  const isApplied = (j_id) => {\r\n    let userId = userdetails.CANDIDATE_ID;\r\n    let obj = {\r\n      userId,\r\n      j_id,\r\n    };\r\n    axios.post(\"http://localhost:3001/api/isApplied/\", obj).then((response) => {\r\n      if (response) {\r\n      \r\n        if(response.data.returnValue)\r\n          return \r\n      }\r\n    });\r\n  };\r\n  const displayJobs = Object.entries(jobs)\r\n    .slice(pageVisited, pageVisited + Jobsperpage)\r\n    .map((job) => {\r\n      return (\r\n        <li>\r\n          <div\r\n            className='container mt-2 bg-light border-dark'\r\n            id={job[1].JOB_ID}\r\n            key={job[1].JOB_ID}\r\n          >\r\n            <div className='d-flex '>\r\n              <div className='p-1'>{job[1].JobRole}</div>\r\n              <div className='p-1 mr-auto'>({job[1].JobType})</div>\r\n              <div className='p-1'>{job[1].CompanyName},</div>\r\n              <div className='p-1'>{job[1].JobLocation}</div>\r\n            </div>\r\n            <div className='d-flex p-2'>\r\n              Job Description: <br />\r\n              {job[1].JobDescription}\r\n            </div>\r\n            <div className='d-flex p-1'>\r\n              <div className='flex-row'>\r\n                <div className='order-3 p-1'>Experience</div>\r\n                <div className='order-2 p-1'>\r\n                  {job[1].RequiredExperience}+\r\n                  {parseInt(job[1].RequiredExperience) > 1 ? \" Years\" : \" Year\"}\r\n                </div>\r\n              </div>\r\n              <div className='flex-row mr-auto'>\r\n                <div className='order-2 p-1'>Qualification</div>\r\n                <div className='order-3 p-1'>\r\n                  {job[1].RequiredQualification}\r\n                </div>\r\n              </div>\r\n              <div className='flex-row'>\r\n                <div className='order-2 p-2'>Job Posted on</div>\r\n                <div className='order-3 p-1'>\r\n                  {new Date(job[1].PostingDate).getDate()}/\r\n                  {new Date(job[1].PostingDate).getMonth() + 1}/\r\n                  {new Date(job[1].PostingDate).getFullYear()}\r\n                </div>\r\n              </div>\r\n              {isApplied(job[1].JOB_ID) ? (\r\n                <button\r\n                  type='button'\r\n                  class='order-4 btn btn-success btn-sm float-right'\r\n                >\r\n                  Applied{\" \"}\r\n                </button>\r\n              ) : (\r\n                <button\r\n                  type='button'\r\n                  class='order-4 btn btn-info btn-sm float-right'\r\n                  data-dismiss='alert'\r\n                  onClick={() => ApplyNow(job[1].JOB_ID)}\r\n                >\r\n                  Apply Now\r\n                </button>\r\n              )}\r\n            </div>\r\n          </div>\r\n        </li>\r\n      );\r\n    });\r\n  const loadData = () => {\r\n    fetch(\"http://localhost:3001/api/Alljobs\")\r\n      .then((response) => response.json())\r\n      .then((data) => {\r\n        setJobs(data.recordset);\r\n      });\r\n  };\r\n  useEffect(() => {\r\n    loadData();\r\n  }, []);\r\n\r\n  if (hasApplied) {\r\n    return <Redirect to='/jobsApplied' />;\r\n  }\r\n  if (isLoggedin) {\r\n    if (localStorage.getItem(\"type\") == \"Company\")\r\n      return <Redirect to='/CompanyHome' />;\r\n  } else if (!isLoggedin) {\r\n    return <Redirect to='/Login'></Redirect>;\r\n  }\r\n  const distinctQualifications = Object.entries(jobs)\r\n    .map(function (x) {\r\n      return x[1].RequiredQualification;\r\n    })\r\n    .filter(function test(val, ind, self) {\r\n      return self.indexOf(val) === ind;\r\n    });\r\n\r\n  const QualificationRender = distinctQualifications.map((Qualification) => {\r\n    return (\r\n      <Dropdown.Item onClick={() => QualificationFilter(Qualification)}>\r\n        {Qualification}\r\n      </Dropdown.Item>\r\n    );\r\n  });\r\n  const QualificationFilter = (RequiredQualification) => {\r\n    let filtered = jobs.filter((e) => {\r\n      return e.RequiredQualification == RequiredQualification;\r\n    });\r\n    setJobs(filtered);\r\n  };\r\n  const distinctLocations = Object.entries(jobs)\r\n    .map(function (x) {\r\n      return x[1].JobLocation;\r\n    })\r\n    .filter(function test(val, ind, self) {\r\n      return self.indexOf(val) === ind;\r\n    });\r\n  const LocationRender = distinctLocations.map((JobLocation) => {\r\n    return (\r\n      <Dropdown.Item onClick={() => JobLocationFilter(JobLocation)}>\r\n        {JobLocation}\r\n      </Dropdown.Item>\r\n    );\r\n  });\r\n  const JobLocationFilter = (JobLocation) => {\r\n    let filtered = jobs.filter((e) => {\r\n      return e.JobLocation == JobLocation;\r\n    });\r\n    setJobs(filtered);\r\n  };\r\n\r\n  const DistinctJobType = Object.entries(jobs)\r\n    .map(function (x) {\r\n      return x[1].JobType;\r\n    })\r\n    .filter(function test(val, ind, self) {\r\n      return self.indexOf(val) === ind;\r\n    });\r\n  const JobTypeRender = DistinctJobType.map((JobType) => {\r\n    return (\r\n      <Dropdown.Item onClick={() => JobTypeFilter(JobType)}>\r\n        {JobType}\r\n      </Dropdown.Item>\r\n    );\r\n  });\r\n  const JobTypeFilter = (JobType) => {\r\n    let filtered = jobs.filter((e) => {\r\n      return e.JobType == JobType;\r\n    });\r\n    setJobs(filtered);\r\n  };\r\n\r\n  return (\r\n    <div>\r\n      <NavBar />\r\n      <div class='filters d-flex'>\r\n        <DropdownButton id='dropdown-basic-button' title='Qualification'>\r\n          <Dropdown.Item onClick={() => loadData()}>All</Dropdown.Item>\r\n          {QualificationRender}\r\n        </DropdownButton>\r\n        <DropdownButton id='dropdown-basic-button' title='Location'>\r\n          <Dropdown.Item onClick={() => loadData()}>All</Dropdown.Item>\r\n          {LocationRender}\r\n        </DropdownButton>\r\n        <DropdownButton id='dropdown-basic-button' title='Job Type'>\r\n          <Dropdown.Item onClick={() => loadData()}>All</Dropdown.Item>\r\n          {JobTypeRender}\r\n        </DropdownButton>\r\n      </div>\r\n\r\n      <ul type='none'>{displayJobs}</ul>\r\n\r\n      <ReactPaginate\r\n        previousLabel={\"Previous\"}\r\n        nextLabel={\"Next\"}\r\n        pageCount={pageCount}\r\n        onPageChange={changePage}\r\n        containerClassName={\"paginationBttns\"}\r\n        previousLinkClassName={\"previousBttn\"}\r\n        nextLinkClassName={\"nextBttn\"}\r\n        disabledClassName={\"paginationDisabled\"}\r\n        activeClassName={\"paginationActive\"}\r\n      />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default CandidateHome;\r\n"]},"metadata":{},"sourceType":"module"}